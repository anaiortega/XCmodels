
short_wall=  geom.Poligono2d() # Contour of the short bearing wall
short_wall.agregaVertice(geom.Pos2d(0.00470630638301,4.66260480881))
short_wall.agregaVertice(geom.Pos2d(0.637861073017,7.10972166061))
short_wall.agregaVertice(geom.Pos2d(1.02176041097,10.6289414802))
short_wall.agregaVertice(geom.Pos2d(1.02176041097,10.6289414802))
short_wall.agregaVertice(geom.Pos2d(0.778971450983,21.8052480313))
short_wall.agregaVertice(geom.Pos2d(0.587126255035,22.9024066925))
short_wall.agregaVertice(geom.Pos2d(0.350229382515,23.9211769104))
short_wall.agregaVertice(geom.Pos2d(-3.80714126891e-09,24.9636802673))
short_wall.agregaVertice(geom.Pos2d(-0.0168458539993,23.6835536957))
short_wall.agregaVertice(geom.Pos2d(0.265511572361,22.4799594879))
short_wall.agregaVertice(geom.Pos2d(0.434572041035,21.5436344147))
short_wall.agregaVertice(geom.Pos2d(0.671657562256,10.6298742294))
short_wall.agregaVertice(geom.Pos2d(0.483984142542,8.62965393066))
short_wall.agregaVertice(geom.Pos2d(0.327295213938,7.2866101265))
short_wall.agregaVertice(geom.Pos2d(0.169979244471,6.59615755081))
short_wall.agregaVertice(geom.Pos2d(-0.00809708889574,6.39837121964))

long_wall=geom.Poligono2d() # Contour of the long bearing wall
long_wall.agregaVertice(geom.Pos2d(8.114361763,-1.73313308149e-09))
long_wall.agregaVertice(geom.Pos2d(6.76596832275,2.02290296555))
long_wall.agregaVertice(geom.Pos2d(5.7817697525,4.37147188187))
long_wall.agregaVertice(geom.Pos2d(5.34317350388,6.25103521347))
long_wall.agregaVertice(geom.Pos2d(5.24820184708,7.40167379379))
long_wall.agregaVertice(geom.Pos2d(5.19219303131,8.08025836945))
long_wall.agregaVertice(geom.Pos2d(5.38900709152,19.0178985596))
long_wall.agregaVertice(geom.Pos2d(5.49120235443,24.6972522736))
long_wall.agregaVertice(geom.Pos2d(5.50042104721,25.209569931))
long_wall.agregaVertice(geom.Pos2d(5.782579422,26.7828884125))
long_wall.agregaVertice(geom.Pos2d(6.52353239059,28.184343338))
long_wall.agregaVertice(geom.Pos2d(7.6761325305,29.3177150753))
long_wall.agregaVertice(geom.Pos2d(8.39999999619,29.3177150753))
long_wall.agregaVertice(geom.Pos2d(8.39999999619,29.3177150753))
long_wall.agregaVertice(geom.Pos2d(8.39999999619,29.180705981))
long_wall.agregaVertice(geom.Pos2d(7.2779006958,28.2872467041))
long_wall.agregaVertice(geom.Pos2d(6.98829984665,27.9051761627))
long_wall.agregaVertice(geom.Pos2d(6.3922162056,26.9374084473))
long_wall.agregaVertice(geom.Pos2d(6.22338151932,26.3484649658))
long_wall.agregaVertice(geom.Pos2d(6.00136518478,25.2575359344))
long_wall.agregaVertice(geom.Pos2d(5.69533109665,8.03961658478))
long_wall.agregaVertice(geom.Pos2d(5.79911661148,6.7148103714))
long_wall.agregaVertice(geom.Pos2d(6.11394739151,5.05856561661))
long_wall.agregaVertice(geom.Pos2d(6.86278247833,3.03532171249))
long_wall.agregaVertice(geom.Pos2d(7.46937465668,1.87837505341))
long_wall.agregaVertice(geom.Pos2d(8.39999961853,0.426232159138))
long_wall.agregaVertice(geom.Pos2d(8.39999961853,-1.73313308149e-09))

inside_area=geom.Poligono2d() 
inside_area.agregaVertice(geom.Pos2d(-3.80714126891e-09,4.59544086456))
inside_area.agregaVertice(geom.Pos2d(0.677704155445,6.9423160553))
inside_area.agregaVertice(geom.Pos2d(1.0814306736,10.5950431824))
inside_area.agregaVertice(geom.Pos2d(0.939798772335,18.0687503815))
inside_area.agregaVertice(geom.Pos2d(0.866146445274,21.83634758))
inside_area.agregaVertice(geom.Pos2d(0.559057474136,23.4750595093))
inside_area.agregaVertice(geom.Pos2d(0.202211230993,24.6477127075))
inside_area.agregaVertice(geom.Pos2d(0.0730192661285,24.9977703094))
inside_area.agregaVertice(geom.Pos2d(-0.00744321197271,25.5077152252))
inside_area.agregaVertice(geom.Pos2d(0.42504298687,25.5077152252))
inside_area.agregaVertice(geom.Pos2d(6.44999980927,29.3177146912))
inside_area.agregaVertice(geom.Pos2d(7.53897190094,29.3177146912))
inside_area.agregaVertice(geom.Pos2d(6.46278476715,28.2627677917))
inside_area.agregaVertice(geom.Pos2d(5.67787361145,26.8184680939))
inside_area.agregaVertice(geom.Pos2d(5.42642831802,25.2997379303))
inside_area.agregaVertice(geom.Pos2d(5.3237528801,20.0532436371))
inside_area.agregaVertice(geom.Pos2d(5.09060430527,8.14678859711))
inside_area.agregaVertice(geom.Pos2d(5.25152921677,6.36655426025))
inside_area.agregaVertice(geom.Pos2d(5.67222833633,4.40588092804))
inside_area.agregaVertice(geom.Pos2d(6.66795253754,2.00206112862))
inside_area.agregaVertice(geom.Pos2d(8.01592540741,-1.73313308149e-09))
inside_area.agregaVertice(geom.Pos2d(6.4559636116,-1.73313308149e-09))
inside_area.agregaVertice(geom.Pos2d(0.408201396465,3.90771508217))
inside_area.agregaVertice(geom.Pos2d(-0.25,3.90771508217))



def proj2dPos(n,angle):
    '''Return the Pos2d in the plane Z=0 of a node that belongs to a plane 
    rotated alpha radians about the X axis. 
    '''
    np2d=n.getInitialPos2d
    return geom.Pos2d(np2d.x,np2d.y/math.cos(angle))

nod_deck=deck.getNodes
el_deck_lst=[e for e in deck.getElements]

nod_in_short_wall=[n for n in nod_deck if short_wall.In(proj2dPos(n,alpha),0)]
nod_in_long_wall=[n for n in nod_deck if long_wall.In(proj2dPos(n,alpha),0)]
nod_in_inside_area=[n for n in nod_deck if inside_area.In(proj2dPos(n,alpha),0)]

setShortWall=sets.lstNod_to_set(prep,nod_in_short_wall,'setShortWall')
setLongWall=sets.lstNod_to_set(prep,nod_in_long_wall,'setLongWall')
setInsideArea=sets.lstNod_to_set(prep,nod_in_inside_area,'setInsideArea')

setShortWall=sets.lstElem_to_set(prep,el_deck_lst,'setShortWall')
setLongWall=sets.lstElem_to_set(prep,el_deck_lst,'setLongWall')
setInsideArea=sets.lstElem_to_set(prep,el_deck_lst,'setInsideArea')
